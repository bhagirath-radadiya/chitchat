{% extends "user/base.html" %}
{% load static %}

{% block title %}Friends{% endblock %}

{% block content %}
    <!-- Sidebar Start -->
    <aside class="sidebar" style="width: 40%">
        <!-- Tab Content Start -->
        <div class="tab-content">


            <!-- Friends Tab Content Start -->
            <div class="tab-pane active" id="friends-content">
                <div class="d-flex flex-column h-100">
                    <div class="hide-scrollbar" id="friendsList">
                        <!-- Chat Header Start -->
                        <div class="sidebar-header sticky-top p-2">

                            <div class="d-flex justify-content-between align-items-center">
                                <!-- Chat Tab Pane Title Start -->
                                <h5 class="font-weight-semibold mb-0">Friends</h5>
                                <!-- Chat Tab Pane Title End -->

                                <ul class="nav flex-nowrap">


                                    <li class="nav-item list-inline-item mr-0">
                                        <div class="dropdown">
                                            <a class="nav-link text-muted px-1" href="#" role="button" title="Details"
                                               data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                <!-- Default :: Inline SVG -->
                                                <svg class="hw-20" fill="none" viewBox="0 0 24 24"
                                                     stroke="currentColor">
                                                    <path stroke-linecap="round" stroke-linejoin="round"
                                                          stroke-width="2"
                                                          d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"/>
                                                </svg>

                                                <!-- Alternate :: External File link -->
                                                <!-- <img src="./../assets/media/heroicons/outline/dots-vertical.svg" alt="" class="injectable hw-20"> -->
                                            </a>

                                            <div class="dropdown-menu dropdown-menu-right">

                                                <a class="dropdown-item" href="#" role="button" data-toggle="modal"
                                                   data-target="#inviteOthers">Invite Others</a>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>


                        </div>
                        <!-- Chat Header End -->

                        <!-- Friends Contact List Start -->
                        <ul class="contacts-list" id="friendsTab" data-friends-list="">
                            <!-- Item Series Start -->

                            {% for i in friendRequest %}
                                <!-- friends Item Start -->
                                <li class="contacts-item">
                                    <div class="contacts-link">
                                        {% for j in profilePhotoList %}
                                            {% if i.friendRequest_From.pk == j.user_LoginId.pk %}
                                                <div class="avatar ">
                                                    <img src="{{ j.userProfilePhoto.url }}" alt="">
                                                </div>
                                            {% endif %}
                                        {% endfor %}
                                        <a style="width: 50%"
                                           href="/viewRequestProfile?friendRequest_To={{ i.friendRequest_From.pk }}">
                                            <div class="contacts-content">
                                                <div class="contacts-info">
                                                    <h6 class="chat-name text-truncate">{{ i.friendRequest_From.loginUserName }}</h6>
                                                </div>
                                            </div>
                                        </a>
                                        <div class="contacts-content">
                                            <div class="contacts-info">
                                                <a href="/accept?friendRequest_From={{ i.friendRequest_From.pk }}">
                                                    <button type="button" class="btn btn-primary mx-1">Accept</button>
                                                </a>
                                                <a href="/reject?friendRequest_From={{ i.friendRequest_From.pk }}">
                                                    <button type="button" hre class="btn btn-outline-danger mx-1">Reject
                                                    </button>
                                                </a>

                                            </div>
                                        </div>

                                    </div>

                                </li>
                                <!-- friends Item End -->
                            {% endfor %}


                        </ul>
                        <!-- Friends Contact List End -->
                    </div>
                </div>
            </div>
            <!-- Friends Tab Content End -->


        </div>
        <!-- Tab Content End -->
    </aside>
    <!-- Sidebar End -->

    <!-- Main Start -->
    <main class="main">
        {% if userNotFound %}
            <div style="text-align: center;width: 100%;height: 100%;"><h4
                    style="text-align: center;padding-top: 30%">{{ userNotFound }}</h4></div>
        {% endif %}
        {% if alreadyFriend %}
            <div style="text-align: center;width: 100%;height: 100%;"><h4
                    style="text-align: center;padding-top: 30%">{{ alreadyFriend }}</h4></div>
        {% endif %}
        {% if requestPending %}
            <div style="text-align: center;width: 100%;height: 100%;"><h4
                    style="text-align: center;padding-top: 30%">{{ requestPending }}</h4></div>
        {% endif %}
        {% if showRequest %}
            <div style="text-align: center;width: 100%;height: 100%;"><h4
                    style="text-align: center;padding-top: 30%">{{ showRequest }}</h4></div>
        {% endif %}


        <!-- Friends Page Start -->
        <div style="overflow: auto;width: 100%;height: 100%;padding-top: 2%;padding-bottom: 2%">
            <div class="container-xl">
                {% for j in userProfile %}
                    <div class="row">
                        <div class="col">
                            <div class="card card-body card-bg-1 mb-3">
                                <div class="d-flex flex-column align-items-center">
                                    <div class="avatar avatar-lg mb-3">
                                        <img class="avatar-img" src="{{ j.userProfilePhoto.url }}"
                                             alt="">
                                    </div>

                                    <div class="d-flex flex-column align-items-center">
                                        <h5 class="mb-1">{{ j.userName }}</h5>
                                        <!-- <p class="text-white rounded px-2 bg-primary">+01-202-265462</p> -->
                                    </div>
                                </div>

                                <div class="card-options">
                                    <div class="dropdown">
                                        <button class="btn btn-secondary btn-icon btn-minimal btn-sm text-muted"
                                                type="button" data-toggle="dropdown" aria-haspopup="true"
                                                aria-expanded="false">
                                            <svg class="hw-20" fill="none" viewBox="0 0 24 24"
                                                 stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round"
                                                      stroke-width="2"
                                                      d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"/>
                                            </svg>

                                            <!-- <img class="injectable hw-20" src="./../assets/media/heroicons/outline/dots-vertical.svg" alt=""> -->
                                        </button>
                                        <div class="dropdown-menu">
                                            <a class="dropdown-item" href="#">Remove</a>
                                            <a class="dropdown-item" href="#">Block</a>
                                        </div>
                                    </div>
                                </div>

                                <div class="chat-closer d-xl-none">
                                    <!-- Chat Back Button (Visible only in Small Devices) -->
                                    <button class="btn btn-secondary btn-icon btn-minimal btn-sm text-muted"
                                            type="button"
                                            data-close="">
                                        <svg class="hw-20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                  d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
                                        </svg>

                                        <!-- <img class="injectable hw-20" src="./../assets/media/heroicons/outline/arrow-left.svg" alt=""> -->
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row friends-info">
                        <div class="col">
                            <div class="card">
                                <ul class="list-group list-group-flush">
                                    <li class="list-group-item">
                                        <div class="media align-items-center">
                                            <div class="media-body">
                                                <p class="small text-muted mb-0">Birthdate</p>
                                                <p class="mb-0">{{ j.birthdate }}</p>
                                            </div>
                                            <svg class="text-muted hw-20" fill="none" viewBox="0 0 24 24"
                                                 stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round"
                                                      stroke-width="2"
                                                      d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                            </svg>

                                            <!-- <img class="injectable text-muted hw-20" src="./../assets/media/heroicons/outline/calendar.svg" alt=""> -->
                                        </div>
                                    </li>
                                    <li class="list-group-item">
                                        <div class="media align-items-center">
                                            <div class="media-body">
                                                <p class="small text-muted mb-0">Phone</p>
                                                <p class="mb-0">{{ j.userMobileNo }}</p>
                                            </div>
                                            <svg class="text-muted hw-20" fill="none" viewBox="0 0 24 24"
                                                 stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round"
                                                      stroke-width="2"
                                                      d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
                                            </svg>
                                            <!-- <img class="injectable text-muted hw-20" src="./../assets/media/heroicons/outline/phone.svg" alt=""> -->
                                        </div>
                                    </li>
                                    <li class="list-group-item">
                                        <div class="media align-items-center">
                                            <div class="media-body">
                                                <p class="small text-muted mb-0">Email</p>
                                                <p class="mb-0">{{ j.user_LoginId.loginUserName }}</p>
                                            </div>
                                            <svg class="text-muted hw-20" fill="none" viewBox="0 0 24 24"
                                                 stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round"
                                                      stroke-width="2"
                                                      d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                                            </svg>
                                            <!-- <img class="injectable text-muted hw-20" src="./../assets/media/heroicons/outline/mail.svg" alt=""> -->
                                        </div>
                                    </li>
                                    <li class="list-group-item">
                                        <div class="media align-items-center">
                                            <div class="media-body">
                                                <p class="small text-muted mb-0">Address</p>
                                                <p class="mb-0">{{ j.userAddress }}</p>
                                            </div>
                                            <svg class="text-muted hw-20" fill="none" viewBox="0 0 24 24"
                                                 stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round"
                                                      stroke-width="2"
                                                      d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                                            </svg>
                                            <!-- <img class="injectable text-muted hw-20" src="./../assets/media/heroicons/outline/home.svg" alt=""> -->
                                        </div>
                                    </li>
                                </ul>
                            </div>


                            <div class="card">
                                <ul class="list-group list-group-flush">
                                    <li class="list-group-item">
                                        <div class="media align-items-center">
                                            <div class="media-body">
                                                <p class="small text-muted mb-0">Facebook</p>
                                                <a class="font-size-sm font-weight-medium"
                                                   href="{{ j.userFacebook }}">{{ j.userFacebook }}</a>
                                            </div>
                                            <svg class="text-muted hw-20" viewBox="0 0 24 24" fill="none"
                                                 stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                                 stroke-linejoin="round">
                                                <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/>
                                            </svg>
                                            <!-- <img class="injectable text-muted hw-20" src="./../assets/media/icons/facebook.svg" alt=""> -->
                                        </div>
                                    </li>
                                    <li class="list-group-item">
                                        <div class="media align-items-center">
                                            <div class="media-body">
                                                <p class="small text-muted mb-0">Twitter</p>
                                                <a class="font-size-sm font-weight-medium"
                                                   href="{{ j.userTwitter }}">{{ j.userTwitter }}</a>
                                            </div>
                                            <svg class="text-muted hw-20" viewBox="0 0 24 24" fill="none"
                                                 stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                                 stroke-linejoin="round">
                                                <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
                                            </svg>
                                            <!-- <img class="injectable text-muted hw-20" src="./../assets/media/icons/twitter.svg" alt=""> -->
                                        </div>
                                    </li>
                                    <li class="list-group-item">
                                        <div class="media align-items-center">
                                            <div class="media-body">
                                                <p class="small text-muted mb-0">Instagram</p>
                                                <a class="font-size-sm font-weight-medium"
                                                   href="{{ j.userInstagram }}">{{ j.userInstagram }}</a>
                                            </div>
                                            <svg class="text-muted hw-20" viewBox="0 0 24 24" fill="none"
                                                 stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                                 stroke-linejoin="round">
                                                <rect x="2" y="2" width="20" height="20" rx="5" ry="5"/>
                                                <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/>
                                                <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/>
                                            </svg>
                                            <!-- <img class="injectable text-muted hw-20" src="./../assets/media/icons/instagram.svg" alt=""> -->
                                        </div>
                                    </li>
                                    <li class="list-group-item">
                                        <div class="media align-items-center">
                                            <div class="media-body">
                                                <p class="small text-muted mb-0">Linkedin</p>
                                                <a class="font-size-sm font-weight-medium"
                                                   href="{{ j.userLinkedin }}">{{ j.userLinkedin }}</a>
                                            </div>
                                            <svg class="text-muted hw-20" viewBox="0 0 24 24" fill="none"
                                                 stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                                 stroke-linejoin="round">
                                                <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/>
                                                <rect x="2" y="9" width="4" height="12"/>
                                                <circle cx="4" cy="4" r="2"/>
                                            </svg>
                                            <!-- <img class="injectable text-muted hw-20" src="./../assets/media/icons/linkedin.svg" alt=""> -->
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                {% endfor %}


            </div>
        </div>
        <!-- Friends Page End -->


    </main>
    <!-- Main End -->

    <!-- Modal 3 :: Invite Others -->
    <div class="modal modal-lg-fullscreen fade" id="inviteOthers" tabindex="-1" role="dialog"
         aria-labelledby="inviteOthersLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-dialog-zoom">
            <form method="post" action="insertFriendRequest">
                {% csrf_token %}
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="inviteOthersLabel">Invite Others</h5>

                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>

                    <div class="modal-body hide-scrollbar">


                        <div class="row">
                            <div class="col-12">
                                <div class="form-group">
                                    <label for="inviteEmailAddress">Email address</label>
                                    <input name="friendRequest_To" type="email" class="form-control form-control-md"
                                           id="inviteEmailAddress"
                                           placeholder="Type email address here" value="" required>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="form-group">
                                    <label for="inviteMessage">Invitation message</label>
                                    <textarea name="friendRequest_MSG"
                                              class="form-control form-control-md no-resize hide-scrollbar"
                                              id="inviteMessage" placeholder="Write your message here"
                                              rows="3"></textarea>
                                </div>
                            </div>
                        </div>


                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-link text-muted" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Send Invitation</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
{% endblock %}




